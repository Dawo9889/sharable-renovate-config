# Dependabot configuration for automatic dependency updates
# https://docs.github.com/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file

version: 2

# Configure access to private Google Artifact Registry
registries:
  google-artifact-registry:
    type: docker-registry
    url: europe-west3-docker.pkg.dev
    username: _json_key_base64
    password: ${{secrets.GCP_SA_KEY}}

updates:
  # Monitor Dockerfiles in root directory
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"
    registries:
      - google-artifact-registry
    labels:
      - "dependencies"
      - "docker"

  # Monitor Dockerfiles in test-image directory
  - package-ecosystem: "docker"
    directory: "/test-image"
    schedule:
      interval: "weekly"
    registries:
      - google-artifact-registry
    labels:
      - "dependencies"
      - "docker"
      - "test"