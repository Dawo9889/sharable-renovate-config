# Test file for Renovate with Google Artifact Registry private images
# This tests Renovate's ability to access and update images from private GCP registry

test-scenario: renovate-gcp-artifact-registry-testing

# TEST 1: Basic tag (no digest) - Renovate should detect update from v1.0.0 â†’ v2.0.0
images-basic:
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/renovate-private-registry-test/renovate-test:v2.0.0

# TEST 2: Tag + digest - Renovate should update both tag and digest
images-with-digest:
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/renovate-private-registry-test/renovate-test:v2.0.0@sha256:3e5e0205bc9494f280afb9e62de3b2e979475b16267ed71d2642496281c17bde

# TEST 3: Multiple versions to update
images-multi:
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/renovate-private-registry-test/renovate-test:v2.0.0
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/renovate-private-registry-test/renovate-test:v2.0.0
  # Renovate should propose updates to v2.0.0 for both

# TEST 4: Digest only (no tag) - assumes :latest
# Note: Renovate might not detect this as an update without a tag
images-digest-only:
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/renovate-private-registry-test/renovate-test@sha256:1e864016bf5c6c7727a98149f4f64099d5451629245bcadc211dd2ec7c545978

# TEST 5: Stale digest for v2.0.0 (simulating outdated digest)
# Renovate should detect that v2.0.0 has a new digest and propose an update
images-stale-digest:
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/renovate-private-registry-test/renovate-test:v2.0.0@sha256:1e864016bf5c6c7727a98149f4f64099d5451629245bcadc211dd2ec7c545978
  # ^^ This is v1.0.0's digest, but tag says v2.0.0 - Renovate should catch this!

# TEST 6: Latest tag
images-latest:
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/renovate-private-registry-test/renovate-test:latest

public-image-same-repo:
  - europe-west3-docker.pkg.dev/sap-kyma-neighbors-dev/kyma-neighbors-dev-test/component-descriptors/kyma-project.io/module/api-gateway:3.4.2

# Expected digests:
# v1.0.0: sha256:1e864016bf5c6c7727a98149f4f64099d5451629245bcadc211dd2ec7c545978
# v1.1.0: sha256:47457b1033a0c12b98333f7c2004f214aed1fb2d4e43dd99940799074c8e2f23
# v2.0.0: sha256:3e5e0205bc9494f280afb9e62de3b2e979475b16267ed71d2642496281c17bde
